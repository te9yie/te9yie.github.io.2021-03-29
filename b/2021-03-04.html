<!DOCTYPE html><html><head><title>2021-03-04 | te9yie</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="google-site-verification" content="iMWdKZ02K2Yzj9AtOP4cl-40F5DJp-YJLQDzv9vQgMk"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/509606b329852c74360b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/509606b329852c74360b.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-1f0b73d383aed819e4f2.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.3a16fc34825ffc7ba561.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-be08fdd24fededd721c6.js" as="script"/><link rel="preload" href="/_next/static/chunks/7ac61503aba6d10b58e3c266d97d99b7b5b3721a.c1b518faff21babf1a9f.js" as="script"/><link rel="preload" href="/_next/static/chunks/5f8a2089eac11fe3b358516a6b612033195d4834.64ceb811d7eabbf018a0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/b/%5Bid%5D-eaf8ebe7ceed852553b5.js" as="script"/></head><body><div id="__next"><header><nav><ul><li><a id="site-name" href="/"><h1>te9yie</h1></a></li><li><a href="/b">Blog</a></li><li><a href="/w">Wiki</a></li><li><a href="/search">Search</a></li></ul></nav><h2>2021-03-04</h2></header><article><p><a class="wiki-link" href="/w/RSS">RSS</a>をつけてみたい。</p><p><a class="wiki-link" href="/w/Next.js">Next.js</a>で<a class="wiki-link" href="/w/RSS">RSS</a>生成ができるのか調べていた。見つけた方法は2つ。</p><ol><li><code>getServerSideProps()</code>を使って<a class="wiki-link" href="/w/SSR">SSR</a>する。</li><li>ビルド時に別処理で<a class="wiki-link" href="/w/RSS">RSS</a>ファイルを生成する。</li></ol><p>1.の方はサーバの用意が大変そうなのでやりたくない。2.になるんだけど、すでに<a class="wiki-link" href="/w/Next.js">Next.js</a>で同じような処理をやっているので、なんとかまとめたいと思っているんだけど、思いつかない。</p><p><a class="wiki-link" href="/w/RSS">RSS</a>生成は<code>yarn export:rss</code>ってやると<code>./out/rss.xml</code>が出力される感じにしたい。できれば<a class="wiki-link" href="/w/TypeScript">TypeScript</a>で書きたいんだけど、コンパイルとかもろもろ面倒なので素の<a class="wiki-link" href="/w/JavaScript">JavaScript</a>で書くことにしてみる。それなら<code>node gen-rss.js</code>で済む。</p><pre><code class="language-package.json">&quot;scripts&quot;: {
  ...
  &quot;export:rss&quot;: &quot;node gen-rss.js&quot;,
  ...
},</code></pre><p>あとは<a class="wiki-link" href="/w/Next.js">Next.js</a>でもやったような、<a class="wiki-link" href="/w/Markdown">Markdown</a>ファイル群を<a class="wiki-link" href="/w/HTML">HTML</a>に変換して<a class="wiki-link" href="/w/RSS">RSS</a>ファイルを生成する――同じような処理を何度も書くの嫌だなあ。</p><p><a href="https://github.com/te9yie/te9yie.github.io/blob/main/gen-rss.js">https://github.com/te9yie/te9yie.github.io/blob/main/gen-rss.js</a></p><p><a href="https://ja.reactjs.org/docs/react-dom-server.html">ReactDOMServer</a>使ってComponentsを使い回せないかと思ったんだが、コンパイル後<code>.js</code>が散らばったり<code>tsconfig.json</code>をどこに置けば良いのか分からないやらで、今の自分の知識では厳しそうだった。</p><p>あとは<a class="wiki-link" href="/w/GitHub%20Actions">GitHub Actions</a>のワークフローに組み込んで完成。うまく動いているといいなあ。</p></article><footer>© <!-- -->2021<!-- --> <!-- -->te9yie</footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"id":"2021-03-04","content":"[[RSS]]をつけてみたい。\n\n[[Next.js]]で[[RSS]]生成ができるのか調べていた。見つけた方法は2つ。\n\n1. `getServerSideProps()`を使って[[SSR]]する。\n2. ビルド時に別処理で[[RSS]]ファイルを生成する。\n\n1.の方はサーバの用意が大変そうなのでやりたくない。2.になるんだけど、すでに[[Next.js]]で同じような処理をやっているので、なんとかまとめたいと思っているんだけど、思いつかない。\n\n[[RSS]]生成は`yarn export:rss`ってやると`./out/rss.xml`が出力される感じにしたい。できれば[[TypeScript]]で書きたいんだけど、コンパイルとかもろもろ面倒なので素の[[JavaScript]]で書くことにしてみる。それなら`node gen-rss.js`で済む。\n\n```package.json\n\"scripts\": {\n  ...\n  \"export:rss\": \"node gen-rss.js\",\n  ...\n},\n```\n\nあとは[[Next.js]]でもやったような、[[Markdown]]ファイル群を[[HTML]]に変換して[[RSS]]ファイルを生成する――同じような処理を何度も書くの嫌だなあ。\n\nhttps://github.com/te9yie/te9yie.github.io/blob/main/gen-rss.js\n\n[ReactDOMServer](https://ja.reactjs.org/docs/react-dom-server.html)使ってComponentsを使い回せないかと思ったんだが、コンパイル後`.js`が散らばったり`tsconfig.json`をどこに置けば良いのか分からないやらで、今の自分の知識では厳しそうだった。\n\nあとは[[GitHub Actions]]のワークフローに組み込んで完成。うまく動いているといいなあ。\n"}},"__N_SSG":true},"page":"/b/[id]","query":{"id":"2021-03-04"},"buildId":"6ITGa_4BtWY_kkzQctGtQ","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-4f4acd756cef4fe6da1b.js"></script><script src="/_next/static/chunks/main-1f0b73d383aed819e4f2.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" async=""></script><script src="/_next/static/chunks/commons.3a16fc34825ffc7ba561.js" async=""></script><script src="/_next/static/chunks/pages/_app-be08fdd24fededd721c6.js" async=""></script><script src="/_next/static/chunks/7ac61503aba6d10b58e3c266d97d99b7b5b3721a.c1b518faff21babf1a9f.js" async=""></script><script src="/_next/static/chunks/5f8a2089eac11fe3b358516a6b612033195d4834.64ceb811d7eabbf018a0.js" async=""></script><script src="/_next/static/chunks/pages/b/%5Bid%5D-eaf8ebe7ceed852553b5.js" async=""></script><script src="/_next/static/6ITGa_4BtWY_kkzQctGtQ/_buildManifest.js" async=""></script><script src="/_next/static/6ITGa_4BtWY_kkzQctGtQ/_ssgManifest.js" async=""></script></body></html>