<!DOCTYPE html><html><head><title>2021-03-05 | te9yie</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="google-site-verification" content="iMWdKZ02K2Yzj9AtOP4cl-40F5DJp-YJLQDzv9vQgMk"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/6a28d3a6934469944c08.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6a28d3a6934469944c08.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-1f0b73d383aed819e4f2.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.3a16fc34825ffc7ba561.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-ccfc1db105e8018ce102.js" as="script"/><link rel="preload" href="/_next/static/chunks/7ac61503aba6d10b58e3c266d97d99b7b5b3721a.c1b518faff21babf1a9f.js" as="script"/><link rel="preload" href="/_next/static/chunks/5f8a2089eac11fe3b358516a6b612033195d4834.09c9bf1e9518111d6ffd.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/b/%5Bid%5D-eaf8ebe7ceed852553b5.js" as="script"/></head><body><div id="__next"><header><nav><ul><li><a id="site-name" href="/"><h1>te9yie</h1></a></li><li><a href="/b">Blog</a></li><li><a href="/w">Wiki</a></li><li><a href="/search">Search</a></li></ul></nav><h2>2021-03-05</h2></header><article><p>Wikiシステムの改良をしている。</p><ul><li>参照元リンクが自動的に表示されるようにしたい。</li><li>関係ありそうなリンクも自動的に表示されるとうれしい。</li></ul><p>ざっくり言うと<a href="https://scrapbox.io">Scrapbox</a>みたいにしたい。</p><p><a class="wiki-link" href="/w/SSG">SSG</a>でやりたいので、<a class="wiki-link" href="/w/Markdown">Markdown</a>で書かれたファイル群からリンク情報を生成しておくことにした。</p><pre><code class="language-json">[
    {
        id: &quot;ページ名&quot;,
        refLinks: [&quot;このページを参照しているページ名&quot;, ...],
        links: [&quot;このページから参照しているページ名&quot;, ...]
    },
    ...
]</code></pre><p>こんな感じの<a class="wiki-link" href="/w/JSON">JSON</a>を一旦作っておいて、<a class="wiki-link" href="/w/Next.js">Next.js</a>でのビルド時にこのファイルも参照しながらページを構築していく。</p><p>Wikiリンクは<code>[[</code>と<code>]]</code>で囲うと作られるんだけど、存在しないリンクもつくることができる。存在しているかどうかを考えながら囲うか囲うまいか迷うのが嫌なので、ページが存在していなかった場合は自動的に作られるようにした。</p><p>あいかわらず、スクリプトは<a class="wiki-link" href="/w/JavaScript">JavaScript</a>で書いた。</p></article><footer>© <!-- -->2021<!-- --> <!-- -->te9yie</footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"id":"2021-03-05","content":"Wikiシステムの改良をしている。\n\n- 参照元リンクが自動的に表示されるようにしたい。\n- 関係ありそうなリンクも自動的に表示されるとうれしい。\n\nざっくり言うと[Scrapbox](https://scrapbox.io)みたいにしたい。\n\n[[SSG]]でやりたいので、[[Markdown]]で書かれたファイル群からリンク情報を生成しておくことにした。\n\n```json\n[\n    {\n        id: \"ページ名\",\n        refLinks: [\"このページを参照しているページ名\", ...],\n        links: [\"このページから参照しているページ名\", ...]\n    },\n    ...\n]\n```\n\nこんな感じの[[JSON]]を一旦作っておいて、[[Next.js]]でのビルド時にこのファイルも参照しながらページを構築していく。\n\nWikiリンクは`[[`と`]]`で囲うと作られるんだけど、存在しないリンクもつくることができる。存在しているかどうかを考えながら囲うか囲うまいか迷うのが嫌なので、ページが存在していなかった場合は自動的に作られるようにした。\n\nあいかわらず、スクリプトは[[JavaScript]]で書いた。\n"}},"__N_SSG":true},"page":"/b/[id]","query":{"id":"2021-03-05"},"buildId":"zjMn5EolJyv7G1PwhwYLW","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-4f4acd756cef4fe6da1b.js"></script><script src="/_next/static/chunks/main-1f0b73d383aed819e4f2.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" async=""></script><script src="/_next/static/chunks/commons.3a16fc34825ffc7ba561.js" async=""></script><script src="/_next/static/chunks/pages/_app-ccfc1db105e8018ce102.js" async=""></script><script src="/_next/static/chunks/7ac61503aba6d10b58e3c266d97d99b7b5b3721a.c1b518faff21babf1a9f.js" async=""></script><script src="/_next/static/chunks/5f8a2089eac11fe3b358516a6b612033195d4834.09c9bf1e9518111d6ffd.js" async=""></script><script src="/_next/static/chunks/pages/b/%5Bid%5D-eaf8ebe7ceed852553b5.js" async=""></script><script src="/_next/static/zjMn5EolJyv7G1PwhwYLW/_buildManifest.js" async=""></script><script src="/_next/static/zjMn5EolJyv7G1PwhwYLW/_ssgManifest.js" async=""></script></body></html>