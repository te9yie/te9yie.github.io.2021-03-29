{"pageProps":{"data":{"id":"2021-03-03","content":"検索機能をつけたい。Google検索ができればよいと思い設定してみる。\n\n[Programmable Search Engine](https://programmablesearchengine.google.com/)\n\n下記のコードをコピーして貼り付けてくれ、といわれたままやると`<div>`自体が見えなくなってうまく動かなかった。\n\n```html\n<script async src=\"https://cse.google.com/cse.js?cx=c961937a8b4f96e3d\"></script>\n<div class=\"gcse-search\"></div>\n```\n\nまあ[[React]]だから`<script>`あたりの処理がうまく動かないのかなと思った。\n\n`useEffect`で対応してみた。\n\n```typescript\nconst SearchBox: React.FC = () => {\n  const searchBoxRef = React.createRef<HTMLDivElement>();\n  useEffect(() => {\n    if (searchBoxRef && searchBoxRef.current) {\n      const searchBox = searchBoxRef.current;\n      const parent = searchBox.parentNode;\n      const gcse = document.createElement(\"script\");\n      gcse.async = true;\n      gcse.src = \"https://cse.google.com/cse.js?cx=c961937a8b4f96e3d\";\n      parent?.insertBefore(gcse, searchBox);\n    }\n  });\n  return (\n    <div className=\"search-box\">\n      <div ref={searchBoxRef} className=\"gcse-search\"></div>\n    </div>\n  );\n};\n```\n\nあと余白が大きくて邪魔だったので[[CSS]]も書いた。\n\n```css\n.gsc-control-cse {\n    padding: 0 !important;\n}\n```\n"}},"__N_SSG":true}